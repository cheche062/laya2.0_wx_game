!function(e){var t={};function a(s){if(t[s])return t[s].exports;var o=t[s]={i:s,l:!1,exports:{}};return e[s].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.m=e,a.c=t,a.d=function(e,t,s){a.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:s})},a.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/bin/",a(a.s=1)}([function(e,t,a){"use strict";a.r(t);class s extends Laya.Script{constructor(){super()}onEnable(){this._stop=!1,this._btn=this.owner.getChildByName("btn_start"),this._box=this.owner.getChildByName("dom_box"),this._btn.on(Laya.Event.CLICK,this,this.clickHandler)}clickHandler(){this._stop=!this._stop}onUpdate(){this._stop||(this._btn.rotation+=this.angle)}onStageClick(e){e.stopPropagation()}}class o extends Laya.Scene{constructor(){super(),o.instance=this,Laya.MouseManager.multiTouchEnabled=!1,this.loadScene("test/StartScene.scene")}onEnable(){console.log(888888888888e5)}}class n extends Laya.Script{constructor(){super()}onEnable(){this._text=this.owner.getChildByName("dom_text"),this._text.text=this.des,this._angle=this.owner.getChildByName("dom_angle"),this._angle.skin=this.shape,this.owner.on("click",this,this.showLog)}onUpdate(){}setText(e){this._text=e}showLog(e){e.stopPropagation(),console.log(this.des)}}class i extends Laya.Script{constructor(){super()}onEnable(){this.num=0,this.owner.on(Laya.Event.CLICK,this,this.addText)}addText(){this.num++,this.owner.getChildByName("dom_text").index=String(this.num%10),console.log("click666666")}}class r extends Laya.Script{constructor(){super()}onEnable(){}onUpdate(){this.owner.rotation+=this.num}}class l extends Laya.Script{constructor(){super()}onEnable(){this._rig=this.owner.getComponent(Laya.RigidBody),this.level=Math.round(5*Math.random())+1,this._text=this.owner.getChildByName("levelTxt"),this._text.text=this.level+""}onUpdate(){this.owner.rotation++}onTriggerEnter(e,t,a){var s=this.owner;if("buttle"===e.label){if(this.level>1)this.level--,this._text.changeText(this.level+""),s.getComponent(Laya.RigidBody).setVelocity({x:0,y:-10}),Laya.SoundManager.playSound("sound/hit.wav");else if(s.parent){let e=Laya.Pool.getItemByCreateFun("effect",this.createEffect,this);e.pos(s.x,s.y),s.parent.addChild(e),e.play(0,!0),s.removeSelf(),Laya.SoundManager.playSound("sound/destroy.wav")}d.instance.addScore(1)}else"ground"===e.label&&(s.removeSelf(),d.instance.stopGame())}createEffect(){let e=new Laya.Animation;return e.loadAnimation("test/TestAni.ani"),e.on(Laya.Event.COMPLETE,null,function(){e.removeSelf(),Laya.Pool.recover("effect",e)}),e}onDisable(){Laya.Pool.recover("dropBox",this.owner)}}class c extends Laya.Script{constructor(){super()}onEnable(){this.owner.getComponent(Laya.RigidBody).setVelocity({x:0,y:-10})}onTriggerEnter(e,t,a){this.owner.removeSelf()}onUpdate(){this.owner.y<-10&&this.owner.removeSelf()}onDisable(){Laya.Pool.recover("bullet",this.owner)}}class h extends Laya.Script{constructor(){super()}onEnable(){this.createBoxInterval=1e3,this._time=Date.now(),this._started=!1,this._gameBox=this.owner.getChildByName("gameBox"),this.createBox()}onUpdate(){let e=Date.now();e-this._time>this.createBoxInterval&&(this._time=e,this.createBox())}createBox(){let e=Laya.Pool.getItemByCreateFun("dropBox",this.dropBox.create,this.dropBox);e.pos(Math.random()*(Laya.stage.width-100),-100),this._gameBox.addChild(e),console.log(111)}onStageClick(e){e.stopPropagation();let t=Laya.Pool.getItemByCreateFun("bullet",this.bullet.create,this.bullet);t.pos(Laya.stage.mouseX,Laya.stage.mouseY),this._gameBox.addChild(t)}startGame(){this._started||(this._started=!0,this.enabled=!0)}stopGame(){this._started=!1,this.enabled=!1,this.createBoxInterval=1e3,this._gameBox.removeChildren()}}class d extends Laya.Scene{constructor(){super(),d.instance=this,Laya.MouseManager.multiTouchEnabled=!1,this.loadScene("test/TestScene.scene")}onEnable(){this._control=this.getComponent(h),this.tipLbll.on(Laya.Event.CLICK,this,this.onTipClick)}onTipClick(e){this.tipLbll.visible=!1,this._score=0,this.scoreLbl.text="",this._control.startGame()}addScore(e){this._score+=e,this.scoreLbl.changeText("分数："+this._score),this._control.createBoxInterval>600&&this._score%20==0&&(this._control.createBoxInterval-=20)}stopGame(){this.tipLbll.visible=!0,this.tipLbll.text="游戏结束了，点击屏幕重新开始",this._control.stopGame()}}class y{static init(){let e=Laya.ClassUtils.regClass;e("scenes/StartScene.js",o),e("scenes/RunningBall.js",s),e("script/Angle.js",n),e("script/People.js",i),e("script/Star.js",r),e("script/GameUI.js",d),e("script/GameControl.js",h),e("script/Bullet.js",c),e("script/DropBox.js",l)}}y.width=640,y.height=1136,y.scaleMode="fixedwidth",y.screenMode="none",y.alignV="top",y.alignH="left",y.startScene="test/StartScene.scene",y.sceneRoot="",y.debug=!1,y.stat=!1,y.physicsDebug=!1,y.exportSceneToJson=!0,y.init();new class{constructor(){window.Laya3D?Laya3D.init(y.width,y.height):Laya.init(y.width,y.height,Laya.WebGL),Laya.Physics&&Laya.Physics.enable(),Laya.DebugPanel&&Laya.DebugPanel.enable(),Laya.stage.scaleMode=y.scaleMode,Laya.stage.screenMode=y.screenMode,Laya.stage.alignV=y.alignV,Laya.stage.alignH=y.alignH,Laya.URL.exportSceneToJson=y.exportSceneToJson,(y.debug||"true"==Laya.Utils.getQueryString("debug"))&&Laya.enableDebugPanel(),y.physicsDebug&&Laya.PhysicsDebugDraw&&Laya.PhysicsDebugDraw.enable(),y.stat&&Laya.Stat.show(),Laya.alertGlobalError=!0,Laya.ResourceVersion.enable("version.json",Laya.Handler.create(this,this.onVersionLoaded),Laya.ResourceVersion.FILENAME_VERSION)}onVersionLoaded(){Laya.AtlasInfoManager.enable("fileconfig.json",Laya.Handler.create(this,this.onConfigLoaded))}onConfigLoaded(){y.startScene&&Laya.Scene.open(y.startScene)}}},function(e,t,a){e.exports=a(0)}]);